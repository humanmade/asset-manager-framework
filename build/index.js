!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function i(e,t){return e.extend({set:function(r,i,o){return t===r&&(i.click=n(i)),e.prototype.set.apply(this,arguments)}})}function n(e){var t=e.click,r=e.requires.library?"library":"selection";return function(e){var i,n,o=this.controller.state(),a=o.get(r),l=a.models.filter((function(e){return!e.attributes.attachmentExists}));if(t=_.bind(t,this),l.length){var d=(null===(i=o.get("library"))||void 0===i?void 0:i.props.get("provider"))||(null===(n=AMF_DATA.providers[0])||void 0===n?void 0:n.id);d?"local"!==d?(e.target.disabled=!0,wp.ajax.post("amf-select",{selection:a.toJSON(),post:wp.media.view.settings.post.id,provider:d}).done((function(r){Object.keys(r).forEach((function(e){a.get(e).set("id",r[e])})),e.target.disabled=!1,t()})).fail((function(t){var r,i=(null==t||null===(r=t[0])||void 0===r?void 0:r.message)||"An unknown error occurred.";alert(i),e.target.disabled=!1}))):t():alert("No provider found!")}else t()}}function o(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}function a(e){jQuery('a[href*="media-new.php"],.uploader-inline .upload-ui,.uploader-inline .post-upload-ui').toggleClass("amf-hidden",!e.create),jQuery(".media-button.delete-selected-button").toggleClass("amf-hidden",!e.delete),jQuery("#media-attachment-date-filters").toggleClass("amf-hidden",!e.filterDate),jQuery("#media-attachment-filters").toggleClass("amf-hidden",!e.filterType)}r.r(t),wp.media.view.Toolbar=i(wp.media.view.Toolbar,"insert"),wp.media.view.Toolbar.Select=i(wp.media.view.Toolbar.Select,"select"),wp.hooks.doAction("amf.extend_toolbar",i),function(){var e=AMF_DATA.providers;if(e.length)if(o("\n\t\t.view-switch { display: none !important; }\n\t\tbody.upload-php .media-toolbar-secondary { padding: 12px 0; }\n\t\t.amf-hidden { display: none !important; }\n\t"),1!==e.length){o("\n\t\t.media-modal-content .media-frame select.attachment-filters { width: 150px }\n\t\t.media-modal-content .media-frame #media-attachment-provider-filter + .spinner { float: right; margin: -25px -0px 5px 25px; }\n\t");var t=wp.media.view.AttachmentFilters.extend({id:"media-attachment-provider-filter",createFilters:function(){"gallery-edit"===this.options.controller._state?this.$el.hide():this.$el.show(),this.filters=e.reduce((function(e,t){var r=t.id,i=t.name;return e[r]={text:i,props:{provider:r}},e}),{})},select:function(){var t,r=this.model.toJSON(),i=null==e||null===(t=e[0])||void 0===t?void 0:t.id;_.find(this.filters,(function(e,t){if(_.all(e.props,(function(e,t){return e===((null==r?void 0:r[t])||null)})))return i=t})),this.$el.val(i),r.provider&&a(e.find((function(e){return e.id===r.provider})).supports)}}),r=wp.media.view.AttachmentsBrowser;wp.media.view.AttachmentsBrowser=wp.media.view.AttachmentsBrowser.extend({createToolbar:function(){r.prototype.createToolbar.call(this),this.toolbar.set("MediaLibraryProviderFilter",new t({controller:this.controller,model:this.collection.props,priority:-75}).render())}})}else a(e[0].supports)}()}]);